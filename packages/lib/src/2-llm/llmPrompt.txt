You are given a Markdown file that may contain multiple languages. Your task is to enrich this file by identifying metadata and languages.
    
    1. Extract all available metadata from the text, including:
        - Title(s) in all languages
        - Cover Image (the first image you encounter in the incoming MD)
        - smallCoverCredits are for whatever credits are found on the front cover. Even if the line contains colons, just preserve this verbatim, do not try and interpret it.
        - ISBN
        - License (For Creative commons use uppercase abbreviations like "CC-BY-NC")
        - Copyright (write in this form: "Copyright © 2017, Some Special People")
        - Credits (author, illustrator, researchers). Keep this a single sentence or paragraph as found in the input. Do not interpret it, do not make it hierarchical, etc. Keep it verbatim.
        - Topic (usually found on the front cover)
        - Tags (e.g., topic, language)
        - Publisher and location information (country, province, district)
    2. Format this metadata as YAML front matter and insert it at the very top of the Markdown file using `---` delimiters.

    3. Annotate all blocks of text with a language comment. E.g. `<!-- text lang="en" --> This is my house. <!-- text lang="fr" --> C'est ma maison.`
    - Use ISO 639-1 or 639-3 language codes (e.g., `es` for Spanish, `mxa` for Mixteco de Santa María Zacatepec, uz-CYRL for Uzbeck in cyrillic script).
    - Preserve Markdown formatting
    - Preserve all image references
    - Use the same style to tag each metadata field. Place these comments in the body of the markdown, not in the YAML front matter. Example: `<!-- text lang="fr" field="copyright" -->` or `<!-- text lang="en" field="ISBN" -->`.

    4. Preserve all incoming comments. The input markdown may already have `<!-- page -->` comments.
    
    ```markdown
---
allTitles:
  bo: "ངའི་ཁང་པ་།"
  en: "My House"
languages:
  bo: "Tibetan"
  en: "English"
l1: "bo" # the primary language
l2: "en" # often a major language used for metadata, but may also be used in bilingual pages
isbn: "968-31-0276-X"
license: "CC-BY"
licenseUrl: "http://creativecommons.org/licenses/by/4.0/"
licenseNotes: "Ask us before you translate this"
copyright: "Copyright © 1993, Instituto Lingüístico de Verano, A.C."
smallCoverCredits: "Authored by Cassidy, Illustrated by Sundance"
topic: Traditional Story
credits: "the authors, the illustrator"
acknowledgements-original-version: "may thank funders, editors, etc."
acknowledgements-localized-version: "often the translator"
other-credits-on-cover: ""
funding-info: "funded by a grant from the Foo dept of literacy"
country: "Mexico"
province: "Oaxaca"
district: "Santa María Zacatepec"
author: "Virginia López Lucas"
illustrator: "Jose Foo"
publisher: "Instituto de Grillo"
originalPublisher: "Someone else that we derived from."
---
<!-- page index=1 -->

<!-- text lang="bo" field="title" -->
ངའི་ཁང་པ་།

<!-- text lang="en" field="title" -->
My House

![](myHouse.jpg)

<!-- text lang="en" field="smallCoverCredits" -->
Authored by Cassidy, Illustrated by Sundance

<!-- text lang="en" field="topic" -->
Traditional Story

<!-- page index=2 -->

<!-- text lang="en" field="copyright" -->
Copyright 1993, Instituto Lingüístico de Verano, A.C.

<!-- text lang="en" field="license" -->
CC-BY-NC

<!-- text lang="en" field="licenseUrl" -->
http://creativecommons.org/licenses/by-nc/4.0/


<!-- page index=3 -->

<!-- text lang="bo" -->

འདི་ངའི་ཁང་པ་ཡིན།

<!-- page index=3 -->

<!-- text lang="bo" -->

ང་ཚོ་ཧ་ཅང་དགའ།

![](/myFamily.jpg)

<!-- text lang="en" -->

We like it a lot.```    
    
    
    The final output should be a single Markdown file containing:
    
    - Frontmatter using a YAML for metadata
    - The original content with all text annotated for language and all the images referenced.
    
    Ensure the document remains readable and structurally intact, and that no content is lost or misclassified. 
    
    Never truncate anything. You must preserve it all.

    If you aren't sure about the lang tag, do not hallucinate it. Just put in unk-x-languageName, e.g. if you don't know what langtag "northern foobar" uses, you can say "unk-x-northern_foobar".

    The following metadata fields are required: allTitles, languages, l1. Normally you can also provide l2 if there is a second language.

    If you see a number all alone in a text area at the end of a page, it is a page number. Drop it from the output, do not output a text comment for it.

    If on the page with license info, you see `# (cc)`, that's an OCR error, just drop it from the output.
    
    Do not mislabel the licenseUrl field as "license". The licenseUrl field will look like a url. If you see a creativecommons.org license url an don't have a license, you can infer the license from the url. A proper CC license does not end in a version number, e.g. if you just see http://creativecommons.org/licenses/by/4.0/, then is license "CC-BY".

    Note that the cover will often have the name of the L1 on the cover. You can just drop that line, don't make a mistake like adding it to the topic.